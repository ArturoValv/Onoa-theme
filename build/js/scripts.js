const siteHeader=document.querySelector(".site-header"),mobileBtn=document.querySelector("#menu-mobile"),menu=document.querySelector(".main-menu .menu"),menuItems=document.querySelectorAll(".main-menu .menu>.menu-item"),parentMenuItems=document.querySelectorAll(".main-menu .menu-item-has-children"),coverInner=document.querySelector(".cover-inner"),coverBgInner=document.querySelector("body:not(.home) .cover-inner .cover-inner__bg"),extractedBlocks=document.querySelectorAll(".page-template-default .main-content .block");let sectionBlocks=document.querySelectorAll("body .block");function eventListeners(){mobileBtn.addEventListener("click",showMenu),parentMenuItems.forEach(e=>{e.addEventListener("click",t=>{t.target===e&&showSubmenu(t)})}),document.querySelector(".site-header.sticky")&&window.addEventListener("scroll",fadeInHeader),coverBgInner&&initAnimation()}function numerateMenuItems(){menu.setAttribute("style","--length: "+menuItems.length),menuItems.forEach((e,t)=>{e.querySelector("a:first-child").setAttribute("style","--index: "+t)})}function showMenu(){mobileBtn.classList.toggle("active"),siteHeader.classList.toggle("active")}function showSubmenu(e){e.currentTarget.children[1].classList.add("open"),backBtn.style.display="flex"}function hideSubMenu(){let e=document.querySelectorAll(".main-menu .sub-menu.open"),t=e.length;t>0&&e[t-1].classList.remove("open"),1==t&&(backBtn.style.display="none")}function fadeInHeader(){window.scrollY>0?(siteHeader.classList.add("scrolling"),coverBgInner.classList.add("scrolling")):(siteHeader.classList.remove("scrolling"),coverBgInner.classList.remove("scrolling"))}function initAnimation(){let e=coverBgInner.getAttribute("data-style");setTimeout(()=>{coverBgInner.querySelector("img, video").style.opacity=coverBgInner.classList.contains("overlay-applied")?".7":"1",coverBgInner.style.backgroundColor=e,coverBgInner.style.opacity="1"},600)}function extractBlocks(){let e,t;document.querySelector(".site-footer")&&(e=document.querySelector(".site-footer"),t="beforebegin"),document.querySelector(".main-content")&&(e=document.querySelector(".main-content"),t="afterend"),extractedBlocks.forEach(n=>{n.classList.contains("extract-block")&&(e.insertAdjacentHTML(t,n.outerHTML),n.remove())})}function initSections(){sectionBlocks.forEach(e=>{e.setAttribute("data-visibility","hidden")})}function isVisibleInViewport(){extractBlocks&&(sectionBlocks=document.querySelectorAll("body .block")),sectionBlocks.forEach(e=>{let t=e.offsetTop;window.scrollY>=t-siteHeader.clientHeight-300&&(console.log("visible"),e.setAttribute("data-visibility","visible"))})}document.addEventListener("DOMContentLoaded",()=>{numerateMenuItems(),extractedBlocks&&extractBlocks(),sectionBlocks&&(initSections(),isVisibleInViewport()),eventListeners()}),window.addEventListener("load",()=>{window.addEventListener("scroll",isVisibleInViewport)});